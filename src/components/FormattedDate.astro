---
//import { Intl, Temporal } from '@js-temporal/polyfill';
import { dateOpts } from '~/consts';

interface Props extends astroHTML.JSX.TimeHTMLAttributes {
  date: Date; //Temporal.PlainDate | Date;
  //dateTimeOptions?: Intl.DateTimeFormatOptions;
  class?: string;
  itemprop?: string;
}

const {
  class: className = 'dt-published',
  itemprop: itemProp = 'datePublished',
} = Astro.props;
let date = new Date(Astro.props.date);
//if (Number.isNaN(date.getTime())) {
//date = new Date();
//}
const readableDate = date.toLocaleDateString(dateOpts.locale, dateOpts.options);
---

<time class={className} datetime={date.toISOString()} itemprop={itemProp}>
  {readableDate}
</time>
