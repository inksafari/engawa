---
import type { HTMLAttributes } from 'astro/types'
type Props = HTMLAttributes<'a'>

const { href, class: className } = Astro.props
const url = new URL(href, Astro.url)
const _isExternal = url.host !== Astro.url.host
const _isActive =
  url.href === Astro.url.href || url.href === Astro.url.href.replace(/\/$/, '')
---

<a
  href={href}
  class:list={[className, { _active: isActive }]}
  itemprop='url'
  aria-current={_isActive ? 'page' : null}
  rel={_isExternal ? 'nofollow noopener noreferrer' : null}><slot /></a
>
<style>
  a {
    display: inline-block;
    text-decoration: none;
  }
  a._active {
    font-weight: bolder;
  }
  /* a._active::after { content: '‚Üê'; } */

  /* https://ab.github.io/jekyll-theme-tufte/blog/ */
  a._active:before {
    content: '\27e8';
  }

  a._active:after {
    content: '\27e9';
  }
</style>
